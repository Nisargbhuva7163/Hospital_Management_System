<h1>All Appointments for <%= @organization.org_name %></h1>

<!-- ðŸŸ¢ Turbo Stream Subscription for real-time updates -->
<%= turbo_stream_from "organization_#{@organization.id}_updates" %>

<!-- ðŸ“‹ Live-updating Appointments Table -->
<div id="appointments-list">
  <%= render partial: "appointments/list", locals: { appointments: @appointments, organization: @organization } %>
</div>

<!-- âœ… Optional: Show completed and skipped appointments separately -->
<div class="mt-4">
  <%= render partial: "appointments/completed_appointments", locals: { appointments: @appointments.select(&:completed?) } %>
  <%= render partial: "appointments/skipped_appointments", locals: { appointments: @appointments.select(&:skipped?) } %>
</div>

<%= link_to "â† Back to Organizations", organization_path(@organization), class: "btn btn-secondary mb-3" %>
